package vul.fastjson;

import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.serializer.SerializerFeature;

/**
 * @ClassName: Main
 * @Description: TODO
 * @Author: Summer
 * @Date: 2020/6/20 19:59
 * @Version: v1.0.0
 * @Description:
 **/
public class Main {
    public static void main(String[] args) {
        //创建一个用于实验的user类
        User user1 = new User();
        user1.setName("lala");
        user1.setAge(11);
        user1.setbytes(new byte[]{'2', 'd', (byte) 0xff, -1, (byte) 255, (byte) 0x80, (byte) 128, -128});

        //@type序列化
        String serializedStr1 = JSON.toJSONString(user1, SerializerFeature.WriteClassName);
        System.out.println("serializedStr1=" + serializedStr1);

        //通过parse方法进行反序列化
        Object obj4 = JSON.parse(serializedStr1);
        System.out.println("parse反序列化对象名称:" + obj4.getClass().getName());
        System.out.println("parseObject反序列化:" + obj4);

        //通过这种方式返回的是一个相应的类对象
        Object obj5 = JSON.parseObject(serializedStr1);
        System.out.println("parseObject反序列化对象名称:" + obj5.getClass().getName());
        System.out.println("parseObject反序列化:" + obj5);
    }
}
